<view class="container">
  <!-- 顶部状态卡片 -->
  <view class="status-card {{isFasting ? 'fasting' : 'eating'}}">
    <view class="status-content">
      <view class="status-text {{isFasting ? 'fasting-text' : 'eating-text'}}">
        {{isFasting ? '断食中' : '进食中'}}
      </view>
      <view class="status-info">
        <view class="timer">
          {{fastingMode === '168' ? '16:8' : '20:4'}} 模式
        </view>
        <!--view class="time-range">
          {{eatingStart}} - {{eatingEnd}}
        </view-->
      </view>
    </view>
  </view>
  
  <!-- 进度条区域 -->
  <view class="progress-section">
    <view class="progress-header">
      <text class="progress-title">进食窗口</text>
    </view>
    <view class="progress-container">
      <view class="progress-bar">
        <view class="progress-fill" style="width: {{progress}}%"></view>
      </view>
      <view class="progress-labels">
        <text>{{eatingStart}}</text>
        <text>{{eatingEnd}}</text>
      </view>
    </view>
    
    <view class="progress-info">
      <text>剩余时间：{{remainingTime}}小时</text>
    </view>
  </view>
  
  <!-- 今日进餐记录 -->
  <view class="meal-section">
    <view class="section-header">
      <text class="section-title">今日进餐记录</text>
      <!--text class="meal-count">已记录 {{todayMeals.length}} 次</text-->
    </view>
    
    <view wx:if="{{todayMeals.length === 0}}" class="empty-tip">
      <image src="/images/empty.png" class="empty-icon"></image>
      <text>今日尚未记录进餐</text>
    </view>
    
    <view wx:else class="meal-records">
      <block wx:for="{{todayMeals}}" wx:key="index">
        <view class="meal-item">
          <view class="meal-time">{{item}}</view>
          <view class="meal-type">{{getMealType(index)}}</view>
          <view class="meal-actions">
            <view class="edit-icon" bindtap="showTimePicker" data-index="{{index}}">✎</view>
            <view class="delete-icon" bindtap="deleteMeal" data-index="{{index}}">✕</view>
          </view>
        </view>
      </block>
    </view>
  </view>
  
  <!-- 时间选择器弹窗（保持原设计风格） -->
  <view class="time-picker-modal" wx:if="{{showPicker}}">
    <view class="picker-container">
      <view class="picker-header">
        <!-- text class="picker-title">编辑进餐时间</text -->
        <!--text class="picker-title">请选择新的进餐时间</text-->
      </view>
      
      <picker 
        mode="time" 
        value="{{selectedTime}}" 
        start="00:00" 
        end="23:59" 
        bindchange="timeChange"
      >
        <view class="picker-display">
          <text class="picker-time">{{selectedTime}}</text>
          <text class="picker-hint">点击选择时间</text>
        </view>
      </picker>
      
      <view class="picker-buttons">
        <button class="picker-btn cancel" bindtap="hidePicker">取消</button>
        <button class="picker-btn confirm" bindtap="updateMealTime">确定</button>
      </view>
    </view>
  </view>
  
  <!-- 浮动记录按钮 -->
  <view class="floating-button" bindtap="recordMealNow">
    <view class="button-icon">+</view>
    <text>记录进餐</text>
  </view>
</view>